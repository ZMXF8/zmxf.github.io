<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>高强度彩色闪烁测试（25Hz）</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            font-family: "Microsoft YaHei", sans-serif;
            transition: background-color 0ms; /* 移除过渡，确保硬切换 */
        }
        
        .high-intensity-warning {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background: linear-gradient(90deg, #ff0000, #00ff00, #0000ff);
            color: white;
            padding: 15px 0;
            text-align: center;
            font-size: 16px;
            font-weight: bold;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(255,0,0,0.5);
        }
        
        .control-center {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
        }
        
        .emergency-stop {
            background: white;
            color: #e74c3c;
            border: 3px solid #e74c3c;
            padding: 18px 50px;
            font-size: 20px;
            font-weight: bold;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 0 0 4px rgba(255,255,255,0.3), 0 8px 20px rgba(0,0,0,0.3);
            transition: all 0.2s;
        }
        
        .emergency-stop:hover {
            background: #f8f9fa;
            transform: translateX(-50%) translateY(-3px);
        }
        
        .emergency-stop:active {
            transform: translateX(-50%) translateY(1px);
        }
        
        .test-info {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 25px 35px;
            border-radius: 12px;
            text-align: center;
            z-index: 1000;
            max-width: 80%;
        }
        
        .color-indicator {
            font-size: 30px;
            color: #f1c40f;
            margin: 15px 0;
        }
        
        .rgb-values {
            font-size: 14px;
            color: #95a5a6;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <!-- 高强度警告条 -->
    <div class="high-intensity-warning">
        ⚠️ 高危彩色闪烁测试：红/绿/蓝快速切换，立即点击按钮停止！
    </div>
    
    <!-- 测试信息框 -->
    <div class="test-info">
        <h2 style="font-size: 22px; margin-bottom: 5px;">高强度彩色闪烁测试</h2>
        <div class="color-indicator" id="colorDisplay">当前颜色：红色</div>
        <div class="rgb-values" id="rgbDisplay">RGB: 255, 0, 0</div>
        <p>⚠️ 重要警告：</p>
        <p>1. 彩色闪烁可能诱发严重光敏反应，严禁癫痫患者使用</p>
        <p>2. 建议观看不超过3秒，立即停止！</p>
    </div>
    
    <!-- 紧急停止按钮 -->
    <div class="control-center">
        <button class="emergency-stop" id="stopBtn">
            紧急停止
        </button>
    </div>

    <script>
        // 40毫秒切换一次（25Hz）
        const flashInterval = 40; 
        // 标准色卡RGB值
        const colors = [
            { name: "红色", rgb: "255, 0, 0", hex: "#ff0000" },
            { name: "绿色", rgb: "0, 255, 0", hex: "#00ff00" },
            { name: "蓝色", rgb: "0, 0, 255", hex: "#0000ff" }
        ];
        let colorIndex = 0;
        const body = document.body;
        const colorDisplay = document.getElementById('colorDisplay');
        const rgbDisplay = document.getElementById('rgbDisplay');
        const stopBtn = document.getElementById('stopBtn');
        let flashTimerId;
        
        // 启动彩色闪烁
        function startFlashing() {
            const currentColor = colors[colorIndex];
            body.style.backgroundColor = currentColor.hex;
            colorDisplay.textContent = `当前颜色：${currentColor.name}`;
            rgbDisplay.textContent = `RGB: ${currentColor.rgb}`;
            
            // 循环切换颜色
            colorIndex = (colorIndex + 1) % colors.length;
            flashTimerId = setTimeout(startFlashing, flashInterval);
        }
        
        // 停止闪烁
        function stopFlashing() {
            clearTimeout(flashTimerId);
            body.style.backgroundColor = '#f8f9fa'; // 恢复浅色背景
            colorDisplay.textContent = "已停止";
            rgbDisplay.textContent = "";
            stopBtn.innerHTML = "已停止";
            stopBtn.disabled = true;
            stopBtn.style.color = '#6c757d';
            stopBtn.style.borderColor = '#6c757d';
        }
        
        // 按钮事件 - 高优先级响应
        stopBtn.addEventListener('click', stopFlashing);
        
        // 初始启动测试
        startFlashing();
    </script>
</body>
</html>
